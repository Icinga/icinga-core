<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>2.6. Icinga with IDOUtils Quickstart</title>
<link rel="stylesheet" href="../stylesheets/icinga-docs.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1">
<meta name="keywords" content="Supervision, Icinga, Nagios, Linux">
<link rel="home" href="index.html" title="Icinga Version 1.14 Documentation">
<link rel="up" href="ch02.html" title="Chapter 2. Getting Started">
<link rel="prev" href="quickstart-icinga-freebsd.html" title="2.5. Icinga Quickstart FreeBSD">
<link rel="next" href="quickstart-idoutils-freebsd.html" title="2.7. Icinga and IDOUtils Quickstart on FreeBSD">
<script src="../js/jquery-min.js" type="text/javascript"></script><script src="../js/icinga-docs.js" type="text/javascript"></script>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<CENTER><IMG src="../images/logofullsize.png" border="0" alt="Icinga" title="Icinga"></CENTER>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">2.6. Icinga with IDOUtils Quickstart</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="quickstart-icinga-freebsd.html">Prev</a> </td>
<th width="60%" align="center">Chapter 2. Getting Started</th>
<td width="20%" align="right"> <a accesskey="n" href="quickstart-idoutils-freebsd.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" title="2.6. Icinga with IDOUtils Quickstart">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="quickstart-idoutils"></a>2.6. Icinga with IDOUtils Quickstart</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section">2.6.1. <a href="quickstart-idoutils.html#introduction_idoutils">Introduction</a></span></dt>
<dt><span class="section">2.6.2. <a href="quickstart-idoutils.html#prerequisites_idoutils">Prerequisites</a></span></dt>
<dt><span class="section">2.6.3. <a href="quickstart-idoutils.html#newfeatures_idoutils">New features for the IDOUtils:</a></span></dt>
<dt><span class="section">2.6.4. <a href="quickstart-idoutils.html#installpackages_idoutils">Install Packages</a></span></dt>
<dt><span class="section">2.6.5. <a href="quickstart-idoutils.html#createaccount_idoutils">Create Account Information</a></span></dt>
<dt><span class="section">2.6.6. <a href="quickstart-idoutils.html#downloadicingaandplugins_idoutils">Download Icinga and the Plugins</a></span></dt>
<dt><span class="section">2.6.7. <a href="quickstart-idoutils.html#compileinstallidoutils">Compile and Install Icinga with IDOUtils</a></span></dt>
<dt><span class="section">2.6.8. <a href="quickstart-idoutils.html#compileinstall_idoutils">Compile and Install</a></span></dt>
<dt><span class="section">2.6.9. <a href="quickstart-idoutils.html#customiseconfig_idoutils">Customise Configuration</a></span></dt>
<dt><span class="section">2.6.10. <a href="quickstart-idoutils.html#enableidomod">Enable the idomod event broker module</a></span></dt>
<dt><span class="section">2.6.11. <a href="quickstart-idoutils.html#createidoutilsdatabase">Creation of Database and IDOUtils</a></span></dt>
<dt><span class="section">2.6.12. <a href="quickstart-idoutils.html#configclassicui_idoutils">Configure the Classic Web Interface</a></span></dt>
<dt><span class="section">2.6.13. <a href="quickstart-idoutils.html#compileinstallplugins_idoutils">Compile and Install the Monitoring Plugins</a></span></dt>
<dt><span class="section">2.6.14. <a href="quickstart-idoutils.html#selinuxsettings_idoutils">Adjusting the SELinux settings</a></span></dt>
<dt><span class="section">2.6.15. <a href="quickstart-idoutils.html#startiido2dbandicinga">Start IDOUtils and Icinga</a></span></dt>
<dt><span class="section">2.6.16. <a href="quickstart-idoutils.html#configstartup_idoutils">Configure Icinga Startup</a></span></dt>
<dt><span class="section">2.6.17. <a href="quickstart-idoutils.html#loginclassicui_idoutils">Login to the Classic Web Interface</a></span></dt>
<dt><span class="section">2.6.18. <a href="quickstart-idoutils.html#othermods_idoutils">Other Modifications</a></span></dt>
<dt><span class="section">2.6.19. <a href="quickstart-idoutils.html#done_idoutils">You're Done</a></span></dt>
</dl></div>
  

  <div class="section" title="2.6.1. Introduction">
<div class="titlepage"><div><div><h3 class="title">
<a name="introduction_idoutils"></a>2.6.1. Introduction</h3></div></div></div>
    

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Instead of installing Icinga from scratch you may want to use a package which might be available for your OS. Please take
      a look at the <a class="link" href="https://www.icinga.org/download/packages" target="_top">table of packages</a>.</p>

      <p>Please keep in mind that the upstream packages might be outdated so using backport packages is a way to get a recent version.</p>
      <p>If you are planning to install from source then please use the official release tarball.</p>
    </td></tr>
</table></div>

    <div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
      <p>Please don't use git snapshots unless you have an issue which might be solved in the current developer version.</p>
    </td></tr>
</table></div>

    <p>This guide is intended to provide you with simple instructions on how to install Icinga from source (code) and have it
    monitoring your local machine within 30 minutes.</p>

    <p>No advanced installation options are discussed here - just the basics that will work for most of the users who want to get
    started.</p>

    <p>This guide will give you examples for currently three different Linux distributions: <a class="link" href="http://fedoraproject.org/" target="_top">Fedora</a>, <a class="link" href="http://www.ubuntu.com/" target="_top">Ubuntu</a> and <a class="link" href="http://www.opensuse.org/" target="_top">openSuSE</a>. Similar distributions may work as well. That should include <a class="link" href="http://www.redhat.com/" target="_top">RedHat</a>, <a class="link" href="http://www.centos.org/" target="_top">CentOS</a>, <a class="link" href="http://www.debian.org/" target="_top">Debian</a> and <a class="link" href="http://www.novell.com/products/server/" target="_top">SLES</a>.</p>

    <p>Other distributions may inherit from these examples.</p>

    <div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
      <p>If you are planning to use Icinga without IDOUtils please read <a class="xref" href="quickstart-icinga.html" title="2.4. Icinga Quickstart">Section 2.4, “Icinga Quickstart”</a> instead!</p>
    </td></tr>
</table></div>

    <p><span class="bold"><strong>What You'll End Up With</strong></span></p>

    <p>If you follow these instructions, here's what you'll end up with:</p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p>Icinga and the plugins will be installed underneath /usr/local/icinga</p>
      </li>
<li class="listitem">
        <p>Icinga will be configured to monitor a few aspects of your local system (CPU load, disk usage, etc.)</p>
      </li>
<li class="listitem">
        <p>The Icinga classic web interface will be accessible at http://localhost/icinga/ or http://yourdomain.com/icinga</p>
      </li>
<li class="listitem">
        <p>A database which is filled by Icinga using IDOUtils</p>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.2. Prerequisites">
<div class="titlepage"><div><div><h3 class="title">
<a name="prerequisites_idoutils"></a>2.6.2. Prerequisites</h3></div></div></div>
    

    <p>During portions of the installation you'll need to have <span class="bold"><strong>root</strong></span> access to your machine.</p>

    <p>Make sure you've installed the following packages on your system before continuing. IDOUtils use the <a class="link" href="http://libdbi.sourceforge.net" target="_top">libdbi</a> and the libdbi-drivers for several databases. The development libraries are
    also required. The following examples will show how to install the IDOUtils with the libdbi using MySQL or
    PostgreSQL.</p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p>Apache</p>
      </li>
<li class="listitem">
        <p>GCC compiler</p>
      </li>
<li class="listitem">
        <p>C/C++ development libraries</p>
      </li>
<li class="listitem">
        <p><a class="link" href="http://www.boutell.com/gd/" target="_top">GD</a> development libraries</p>
      </li>
<li class="listitem">
        <p>libdbi/libdbi-drivers, database like MySQL or PostgreSQL</p>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>PostgreSQL: Due to changes on insert statements PostgreSQL 8.1 does no longer work (and is already <a class="link" href="http://wiki.postgresql.org/wiki/PostgreSQL_Release_Support_Policy" target="_top">end-of-life</a> since November 2010) so please
          use 8.2 or even better 8.4. String escaping in PostgreSQL 9.x is still in an experimental state (refer to <a class="link" href="https://dev.icinga.org/issues/1974" target="_top">issue #1974</a>).</p>
        </td></tr>
</table></div>
      </li>
</ul></div>

    <p><span class="bold"><strong>Optional</strong></span></p>

    <p>At one time or another you may need to use SNMP-based checks so it is a good idea to install the required packages now. Otherwise
    some plugins are not compiled i.e. not available when you need them and it would require a recompile of the plugins.</p>
  </div>

  <div class="section" title="2.6.3. New features for the IDOUtils:">
<div class="titlepage"><div><div><h3 class="title">
<a name="newfeatures_idoutils"></a>2.6.3. New features for the IDOUtils:</h3></div></div></div>
    

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>SSL-Encryption between idomod and ido2db</strong></span></p>

        <p>If you want to use SSL-encryption you'll need openssl and openssl-devel/libssl-dev (Ubuntu) to be installed!</p>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>SSL has to be enabled on all idomod client, otherwise you will lose data!!!</p>
          </td></tr>
</table></div>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Oracle Database Support</strong></span></p>

        <p>If you want Oracle as RDBMS you'll need to install ocilib instead of libdbi.</p>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>Using IDOUtils 1.5.0 with Oracle requires at least OCILIB 3.9.2 - don't install 3.9.0 or 3.9.1 as they remain
          buggy.</p>
        </td></tr>
</table></div>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p>Oracle libraries and SDK (e.g. Instant Client)</p>

            <p>If you install from package, make sure the libraries are within PATH. Otherwise you need to set the Oracle libs during
            Icinga IDOUtils install using e.g. --with-oracle-lib=/path/to/instantclient</p>
          </li>
<li class="listitem">
            <p>ocilib instead of libdbi</p>
          </li>
</ul></div>

        <p>Get it from http://orclib.sourceforge.net/ and point configure to your Oracle libraries and header files e.g. from the Oracle instant
        client:</p>

        <pre class="screen"> #&gt; ./configure --with-oracle-headers-path=/path/to/instantclient/sdk/include \
    --with-oracle-lib-path=/path/to/instantclient/
 #&gt; make
 #&gt; make install</pre>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p><span class="emphasis"><em>Icinga 1.4</em></span></p>

            <p>As of Icinga 1.4 the minimum expected Oracle version is Oracle 10gR2. Older versions may work, but
            are not supported. Oracle scripts are designed to split data, index and lobs into different tablespaces. For this reason
            there is a new prerequisite to define the tablespace names you want to use. If you are working in a small environment, you can
            set all defines to the same real tablespace. You will find a new script <code class="filename">icinga_defines.sql</code> which you have
            to adapt for your needs before applying <code class="filename">oracle.sql</code>. For your convenience there is a new script
            <code class="filename">create_oracle_sys.sql</code> included, which should help you to create the necessary tablespaces and an
            Icinga application user and must run as SYS. It will make use of <code class="filename">icinga_defines.sql</code> as well. Object
            creation has been moved from <code class="filename">oracle.sql</code> to the script
            <code class="filename">create_icinga_objects_oracle.sql</code>.</p>

            <p>The former <code class="filename">oracle.sql</code> has been redesigned as a master script to record all other scripts as includes
            and expects these includes within the current directory. For this reason you should start <code class="filename">sqlplus</code> executing
            <code class="filename">oracle.sql</code> within this directory. This way the creation of user and tablespaces and the creation of
            Icinga tables runs in one step. As an all-in-one sample you will find a new script
            <code class="filename">db/scripts/create_oracledb.sh</code>. Edit variables to suit your needs and enjoy. If you prefer to do SYS steps
            for yourself, please uncomment <code class="filename">create_oracle_sys.sql</code> and make sure that your database Icinga user
            and tables exist and are defined with the same (or more) rights and that the correct settings have been applied to
            <code class="filename">icinga_defines.sql</code>.</p>
          </li>
<li class="listitem">
            <p><a name="q_id-timezone_support"></a><span class="bold"><strong>Timezone support</strong></span></p>

            <p>All dates are stored as local timestamps in the database. Datatypes are TIMESTAMP for MySQL, LOCAL TIMESTAMP (0)
            for Oracle, and TIMESTAMP WITH TIME ZONE for PostgreSQL. IDO2DB will set session timezone to UTC and store all unix
            timestamps (which are UTC per definition) as UTC based values. Please make sure your system returns unix timestamps as real UTC
            based values (like "date -u '+%s'").</p>

            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
              <p>Make sure your database session runs in the same timezone in which the existing dates have been stored (check your local
              timezone e.g. Oracle:"select sessiontimezone from dual;") if you are running the upgrade script. Additionally for your
              convenience in Oracle you should set your session timestamp format to the value you want, e.g "alter session set
              nls_timestamp_format='YYYY-MM-DD HH24:MI:SS';" or similar. Now you can view entries from different Icinga installations
              in different time zones which are stored in the same database and regardless from where you accessing it, all entries are
              returned in your local time zone.</p>
            </td></tr>
</table></div>
          </li>
</ul></div>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.4. Install Packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="installpackages_idoutils"></a>2.6.4. Install Packages</h3></div></div></div>
    

    <p>You can install your packages by running the following commands (as root or sudo).</p>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Unfortunately sometimes the names of packages change between different releases of the same distribution so if you get a message
      that one of the packages cannot be found then please use the search option of your package manager to get the new name: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            <p><code class="code">yum search &lt;package name&gt;</code> ( <span class="emphasis"><em>Fedora/RHEL/CentOS</em></span> )</p>
          </li>
<li class="listitem">
            <p><code class="code">apt-cache search &lt;package name&gt;</code> ( <span class="emphasis"><em>Debian/Ubuntu</em></span> )</p>
          </li>
<li class="listitem">
            <p><code class="code">zypper search &lt;package name&gt;</code> ( <span class="emphasis"><em>openSuSE/SLES</em></span> )</p>
          </li>
</ul></div>
    </td></tr>
</table></div>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>Fedora/RHEL/CentOS:</strong></span></p>

        <pre class="screen"> #&gt; yum install httpd gcc glibc glibc-common gd gd-devel
 #&gt; yum install libjpeg libjpeg-devel libpng libpng-devel</pre>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>You may have to use libjpeg-turbo and libjpeg-turbo-devel instead</p>
        </td></tr>
</table></div>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p><span class="bold"><strong>MySQL:</strong></span></p>

            <pre class="screen"> #&gt; yum install mysql mysql-server \
    libdbi libdbi-devel libdbi-drivers libdbi-dbd-mysql</pre>
          </li>
<li class="listitem">
            <p><span class="bold"><strong>PostgreSQL:</strong></span></p>

            <pre class="screen"> #&gt; yum install postgresql postgresql-server \
    libdbi libdbi-devel libdbi-drivers libdbi-dbd-pgsql</pre>
          </li>
</ul></div>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian/Ubuntu:</strong></span></p>

        <pre class="screen"> #&gt; apt-get install apache2 build-essential libgd2-xpm-dev
 #&gt; apt-get install libjpeg62 libjpeg62-dev libpng12 libpng12-dev</pre>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>The numbers &lt;62/12&gt; might differ, depending on your distribution</p>
        </td></tr>
</table></div>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>Starting with Debian 6.0 / Ubuntu 10.10 the packages are called libpng12-0 and libdbi0, as well as Debian 6.0
          uses libdbi0-dev while Debian 7.0 will use libdbi-dev.</p>
        </td></tr>
</table></div>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p><span class="bold"><strong>MySQL:</strong></span></p>

            <pre class="screen"> #&gt; apt-get install mysql-server mysql-client libdbi1 libdbi-dev libdbd-mysql</pre>
          </li>
<li class="listitem">
            <p><span class="bold"><strong>PostgreSQL:</strong></span></p>

            <pre class="screen"> #&gt; apt-get install postgresql libdbi1 libdbi-dev libdbd-pgsql libpq-dev</pre>
          </li>
</ul></div>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>openSuSE:</strong></span></p>

        <p>Please use YaST to install at least the packages gd, gd-devel, libjpeg, libjpeg-devel, libpng, libpng-devel and, optionally,
        net-snmp, net-snmp-devel and perl-Net-SNMP.</p>

        <p>Using zypper should work as well:</p>

        <pre class="screen"> #&gt; zypper install gd gd-devel libjpeg libjpeg-devel libpng libpng-devel
 #&gt; zypper install net-snmp net-snmp-devel perl-Net-SNMP</pre>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>The devel packages might be placed on the SDK DVDs.</p>
        </td></tr>
</table></div>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p><span class="bold"><strong>MySQL:</strong></span></p>

            <p>Use YaST to install the packages for the RDBMS you want to use, i.e. "mysql", "mysql-devel", "mysql-client" and the libdbi
            packages "libdbi", "libdbi-devel", "libdbi-drivers" and "libdbi-dbd-mysql", or alternatively <code class="filename">zypper</code>.</p>

            <pre class="screen"> #&gt; zypper install mysql mysql-devel mysql-client \
    libdbi libdbi-devel libdbi-drivers libdbi-dbd-mysql</pre>

            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
              <p>In OpenSuSE 11 (SLES 11) the name of the package was changed from "mysql-devel" to "libmysqlclient-devel".</p>
            </td></tr>
</table></div>
          </li>
<li class="listitem">
            <p><span class="bold"><strong>PostgreSQL:</strong></span></p>

            <p>Use YaST to install the packages for the RDBMS you want to use, i.e. "postgresql", "postgresql-devel", "postgresql-server"
            and the libdbi packages "libdbi", "libdbi-devel" and "libdbi-drivers", or alternatively <code class="filename">zypper</code>.</p>

            <pre class="screen"> #&gt; zypper install postgresql postgresql-devel postgresql-server
 #&gt; zypper install libdbi libdbi-devel libdbi-drivers</pre>
          </li>
</ul></div>

        <p>Using old OpenSuSE (SLES) versions including version 10 it is most likely that there aren't any libdbi packages so you have to
        download and compile the sources. Replace &lt;rdbm&gt; with your desired RDBM like mysql or pgsql. Remember that the Oracle driver
        is not yet working and read the appropriate section with ocilib instead of libdbi.</p>

        <div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
            <p>Download and extract the tar.gz files</p>

            <p><a class="link" href="http://libdbi.sourceforge.net/download.html" target="_top">http://libdbi.sourceforge.net/download.html</a></p>

            <p><a class="link" href="http://libdbi-drivers.sourceforge.net/download.html" target="_top">http://libdbi-drivers.sourceforge.net/download.html</a></p>

            <pre class="screen"> #&gt; tar xvzf libdbi-0.8.3.tar.gz
 #&gt; tar xvzf libdbi-drivers-0.8.3-1.tar.gz</pre>
          </li>
<li class="listitem">
            <p>Install libdbi. Maybe you have to specify additional options with configure (set --prefix=/usr ... )</p>

            <pre class="screen"> #&gt; cd libdbi-0.8.3
 #&gt; ./configure --disable-docs
 #&gt; make
 #&gt; make install</pre>
          </li>
<li class="listitem">
            <p>Install libdbi-drivers</p>

            <pre class="screen"> #&gt; cd libdbi-drivers-0.8.3-1
 #&gt; ./configure --with-&lt;rdbm&gt; --disable-docs
 #&gt; make
 #&gt; make install</pre>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
                <p>Using the 64-bit-versions you have to specify the paths to the include- and lib-dir explicitly:</p>

                <pre class="screen"> #&gt; ./configure --with-&lt;rdbm&gt; \
    --with-&lt;rdbm&gt;-incdir=/usr/include/&lt;rdbm&gt;/ \
    --with-&lt;rdbm&gt;-libdir=/usr/lib64/ --disable-docs</pre>
              </td></tr>
</table></div>
          </li>
</ol></div>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.5. Create Account Information">
<div class="titlepage"><div><div><h3 class="title">
<a name="createaccount_idoutils"></a>2.6.5. Create Account Information</h3></div></div></div>
    

    <p>Become the root user.</p>

    <pre class="screen"> $&gt; su -l</pre>

    <p>Create a new <span class="emphasis"><em>Icinga</em></span> user account and give it a password.</p>

    <pre class="screen"> #&gt; /usr/sbin/useradd -m icinga 
 #&gt; passwd icinga </pre>

    <p>On some distributions you'll need to add the group in a single step:</p>

    <pre class="screen"> #&gt; /usr/sbin/groupadd icinga</pre>

    <p>For sending commands from the classic web interface to Icinga, you'll need to create a new group icinga-cmd. Add the
    webuser and the Icingauser to this group:</p>

    <pre class="screen"> #&gt; /usr/sbin/groupadd icinga-cmd
 #&gt; /usr/sbin/usermod -a -G icinga-cmd icinga
 #&gt; /usr/sbin/usermod -a -G icinga-cmd www-data</pre>

    <p>(or www, wwwrun, apache depending on the distribution)</p>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Some usermod-versions (e.g in OpenSuSE 11 and SLES 11, resp.) are lacking the option -a. In this case please omit the option
      -a.</p>
    </td></tr>
</table></div>

    <div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
      <p>Solaris only supports groupnames with max. 8 characters, please use icingcmd instead of icinga-cmd.</p>
    </td></tr>
</table></div>
  </div>

  <div class="section" title="2.6.6. Download Icinga and the Plugins">
<div class="titlepage"><div><div><h3 class="title">
<a name="downloadicingaandplugins_idoutils"></a>2.6.6. Download Icinga and the Plugins</h3></div></div></div>
    

    <p>Change to your local source directory i.e. /usr/src</p>

    <pre class="screen"> #&gt; cd /usr/src</pre>

    <p>Get the current source from the <a class="link" href="http://www.icinga.org/" target="_top">Icinga Website</a>. Don't forget to download
    the <a class="link" href="https://www.monitoring-plugins.org" target="_top">Monitoring Plugins</a>.</p>
  </div>

  <div class="section" title="2.6.7. Compile and Install Icinga with IDOUtils">
<div class="titlepage"><div><div><h3 class="title">
<a name="compileinstallidoutils"></a>2.6.7. Compile and Install Icinga with IDOUtils</h3></div></div></div>
    

    <p>Extract the Icinga source code tarball</p>

    <pre class="screen"> #&gt; cd /usr/src/ 
 #&gt; tar xvzf icinga-1.14.tar.gz 
 #&gt; cd icinga-1.14</pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>This absolute path is meant when we refer to '/path/to/icinga-src/' in the following text.</p>
    </td></tr>
</table></div>

    <p>Run the Icinga configure script and enable IDOUtils. You will get help by using the --help flag:</p>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Starting with Icinga 1.9 the default has changed so the IDOUtils will be compiled automatically unless disabled
      explicitly.</p>
    </td></tr>
</table></div>

    <pre class="screen"> #&gt; ./configure --with-command-group=icinga-cmd</pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Starting with Apache 2.4 the web configuration folder changed from <code class="filename">/etc/apache2/conf.d</code> to
      <code class="filename">/etc/apache2/conf-available</code> so depending on your distribution (testing versions of Debian / Ubuntu
      ) you might have to add this option to the call of configure </p>
<pre class="screen">#&gt; ./configure --with-httpd-conf=/etc/apache2/conf-available</pre>
    </td></tr>
</table></div>

    <p>Also with PostgreSQL you should not use the argument --enable-pgsq because it is not supported yet.</p>

    <div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
      <p>Compiling on Solaris might fail upon unresolved library dependencies on gethostbyname. In that case run this before running
      configure:</p>

      <pre class="screen"> #&gt; export LIBS=-lsocket -lnsl</pre>
    </td></tr>
</table></div>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>With SSL-Encryption:</strong></span></p>

        <pre class="screen"> #&gt; ./configure --with-command-group=icinga-cmd --enable-idoutils --enable-ssl</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>With Oracle Database Support:</strong></span></p>

        <pre class="screen"> #&gt; ./configure --with-command-group=icinga-cmd --enable-idoutils --enable-oracle </pre>
<p> If you didn't install
        Oracle libraries to PATH, you can point configure there:</p>

        <pre class="screen"> #&gt; ./configure --with-command-group=icinga-cmd \
    --enable-idoutils --enable-oracle \
    --with-oracle-lib=/path/to/instantclient</pre>

        <p>If you didn't install ocilib to the default path (/usr/local) you can point configure to the lib/inc directories:</p>

        <pre class="screen"> #&gt; ./configure --with-command-group=icinga-cmd \
    --enable-idoutils --enable-oracle \
    --with-ocilib-lib=/path/to/ocilib/lib \
    --with-ocilib-inc=/path/to/ocilib/include</pre>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>If you want to change RDBM from Oracle to others, you need to recompile and reinstall IDOUtils!</p>
          </td></tr>
</table></div>
<pre class="screen"> #&gt; make distclean
 #&gt; ./configure --enable-idoutils</pre>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.8. Compile and Install">
<div class="titlepage"><div><div><h3 class="title">
<a name="compileinstall_idoutils"></a>2.6.8. Compile and Install</h3></div></div></div>
    

    <p>Compile the Icinga source code. There is also an extra option for IDOUtils (<span class="emphasis"><em>make idoutils</em></span>) if
    you need to recompile only this module. To see available options, only use "make".</p>

    <pre class="screen"> #&gt; make all</pre>

    <p>Install binaries, init script, sample config files, some eventhandlers, and set permissions on the external command directory.
    </p>
<pre class="screen"> #&gt; make install
 #&gt; make install-init
 #&gt; make install-config
 #&gt; make install-eventhandlers
 #&gt; make install-commandmode
 #&gt; make install-idoutils </pre>
<p> or shorter </p>
<pre class="screen"> #&gt; make fullinstall
 #&gt; make install-config</pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p><code class="literal">make install-config</code> is NOT included in <code class="literal">make fullinstall </code>anymore to avoid accidently
      overwriting of your config files.</p>
    </td></tr>
</table></div>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p><code class="literal">make install-eventhandlers</code> will install some event handler routines. To prevent undesired behaviour it is
      only included when you use <code class="literal">make fullinstall</code>.</p>
    </td></tr>
</table></div>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Install IDOUtils and applicable event broker modules only using the primary "make install" target. Do not manually copy and
      overwrite the existing module as this will result in a segfault on icinga core which is using <code class="filename">idomod.so</code> directly
      preventing usage of a temporary copy explicitly. This is useful for <a class="link" href="http://omdistro.org/" target="_top">OMD.</a></p>
    </td></tr>
</table></div>

    <p>Don't start Icinga yet - there's still more that needs to be done...</p>
  </div>

  <div class="section" title="2.6.9. Customise Configuration">
<div class="titlepage"><div><div><h3 class="title">
<a name="customiseconfig_idoutils"></a>2.6.9. Customise Configuration</h3></div></div></div>
    

    <p>Sample configuration files have been installed by using "make install-config" into <code class="filename">/usr/local/icinga/etc/</code>.
    You'll need to make just one change before you proceed...</p>

    <p>Edit the <span class="emphasis"><em>/usr/local/icinga/etc/objects/contacts.cfg</em></span> config file with your favourite editor and change the
    email address associated with the <span class="emphasis"><em>icingaadmin</em></span> contact definition to the address you'd like to use for receiving
    alerts.</p>

    <pre class="screen"> #&gt; vi /usr/local/icinga/etc/objects/contacts.cfg</pre>

    <pre class="screen"> #&gt; cd /usr/local/icinga/etc/
 #&gt; mv idomod.cfg-sample idomod.cfg
 #&gt; mv ido2db.cfg-sample ido2db.cfg</pre>

    <p>If you want to enable SSL-encryption and you configured the IDOUtils with ./configure --enable-ssl, you have to change
    idomod.cfg as follows:</p>

    <pre class="programlisting"> use_ssl=1
 output_type=tcpsocket
 output=127.0.0.1</pre>

    <p>(don't forget to adjust the ip-address if your database isn't located on localhost) and ido2db.cfg in the following way:</p>

    <pre class="programlisting"> use_ssl=1
 socket_type=tcp </pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>If SSL is enabled in ido2db but not in the different idomod clients - data from those instances will be lost - that's
      guaranteed! SSL configuration has to be the same on all nodes!!!</p>
    </td></tr>
</table></div>
  </div>

  <div class="section" title="2.6.10. Enable the idomod event broker module">
<div class="titlepage"><div><div><h3 class="title">
<a name="enableidomod"></a>2.6.10. Enable the idomod event broker module</h3></div></div></div>
    

    <div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
      <p>Under normal circumstances the following module definition is already present in the <code class="filename">modules</code> subdirectory
      so there is no need to edit the main config file </p>
<pre class="programlisting"> define module{
        module_name    ido_mod
        path           /usr/local/icinga/lib/idomod.so
        module_type    neb
        args           config_file=/usr/local/icinga/etc/idomod.cfg
        }</pre>
<p> </p>
    </td></tr>
</table></div>
  </div>

  <div class="section" title="2.6.11. Creation of Database and IDOUtils">
<div class="titlepage"><div><div><h3 class="title">
<a name="createidoutilsdatabase"></a>2.6.11. Creation of Database and IDOUtils</h3></div></div></div>
    

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>If you just installed a new database system then you have to start the database server before you can create a database. In case
      of MySQL you might use <code class="code">/etc/init.d/mysqld start</code> (or <code class="code">/etc/init.d/mysql</code>, depending on your
      distribution).</p>
    </td></tr>
</table></div>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>MySQL:</strong></span></p>

        <p>Create Database, User, Grants:</p>

        <pre class="screen"> # mysql -u root -p

 mysql&gt; CREATE DATABASE icinga;

 	   GRANT SELECT, INSERT, UPDATE, DELETE, DROP, CREATE VIEW, INDEX, EXECUTE ON icinga.* TO 'icinga'@'localhost' IDENTIFIED BY 'icinga';

        quit</pre>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
          <p>Starting with Icinga 1.8 the icinga user additionally needs EXECUTE privileges.</p>
        </td></tr>
</table></div>

        <p>Import database scheme for MySQL:</p>

        <pre class="screen"> #&gt; cd /path/to/icinga-src/module/idoutils/db/mysql
 #&gt; mysql -u root -p icinga &lt; mysql.sql</pre>

        <p>Edit the DB config file to customize IDOUtils</p>

        

        <pre class="screen"> #&gt; vi /usr/local/icinga/etc/ido2db.cfg</pre>

        <pre class="programlisting"> db_servertype=mysql
 db_port=3306
 db_user=icinga
 db_pass=icinga</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>PostgreSQL:</strong></span></p>

        <p>Create database and User:</p>

        <pre class="screen"> #&gt; su - postgres
 
 $ psql
 postgres=# CREATE USER icinga;
 postgres=# ALTER USER icinga WITH PASSWORD 'icinga';
 postgres=# CREATE DATABASE icinga;
 postgres=# \q
 $ createlang plpgsql icinga;</pre>

        <p>Starting with PostgreSQL 9.1 "createlang ..." is obsolete.</p>

        <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
            <p><span class="bold"><strong>Debian:</strong></span></p>

            <pre class="screen"> #&gt; vi /etc/postgresql/8.x/main/pg_hba.conf</pre>
          </li>
<li class="listitem">
            <p><span class="bold"><strong>Fedora/RHEL/CentOS:</strong></span></p>

            <pre class="screen"> #&gt; vi /var/lib/pgsql/data/pg_hba.conf</pre>
          </li>
</ul></div>

        <p>Edit the config e.g. like this (local user must be trusted)</p>

        <pre class="programlisting"> # database administrative login by UNIX sockets
 local    all        postgres                  ident
 # TYPE   DATABASE   USER       CIDR-ADDRESS   METHOD 
 #icinga
 local    icinga     icinga                    trust
 # "local" is for Unix domain socket connections only
 local    all        all                       trust
 # IPv4 local connections
 host     all        all        127.0.0.1/32   trust
 # IPV6 local connections
 host     all        all        ::1/128        trust</pre>

        <p>Reload and configure database scheme.</p>

        <pre class="screen"> #&gt; /etc/init.d/postgresql-8.x reload</pre>

        <pre class="screen"> #&gt; cd /path/to/icinga-src/module/idoutils/db/pgsql
 #&gt; psql -U icinga -d icinga &lt; pgsql.sql</pre>

        <p>Edit the DB config file to customize IDOUtils</p>

        <pre class="screen"> #&gt; vi /usr/local/icinga/etc/ido2db.cfg</pre>

        <pre class="programlisting"> db_servertype=pgsql
 db_port=5432
 db_user=icinga
 db_pass=icinga</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Oracle:</strong></span></p>

        <p>Create a database schema and username/password (refer to the Oracle documentation at http://www.oracle.com or consult your DBA).
        Import the database scheme with sqlplus (or your preferred method). Copy <code class="filename">module/idoutils/db/oracle/*</code> to
        $ORACLE_HOME and edit <code class="filename">icinga_defines.sql</code> to match tablespace and user credential information.</p>

        <pre class="screen"> #&gt; su - oracle
 $&gt; sqlplus dbuser/dbpass
 SQL&gt; @oracle.sql</pre>

        <p>Edit the DB config file to customize IDOUtils. Remember that Oracle ignores the db host, instead point db_name to
        //DBSERVER/DBNAME</p>

        <pre class="screen"> #&gt; vi /usr/local/icinga/etc/ido2db.cfg</pre>

        <pre class="programlisting">  db_servertype=oracle
  db_port=1521
  db_user=icinga
  db_pass=icinga</pre>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.12. Configure the Classic Web Interface">
<div class="titlepage"><div><div><h3 class="title">
<a name="configclassicui_idoutils"></a>2.6.12. Configure the Classic Web Interface</h3></div></div></div>
    

    <p>Icinga ships with the classic web interface ("the CGIs") which can be installed via</p>

    <pre class="screen"> #&gt; make cgis
 #&gt; make install-cgis
 #&gt; make install-html</pre>

    <p>If you are interested in the new Icinga Web, please refer to <a class="link" href="icinga-web-scratch.html" title="6.5. Installation of the Icinga Web Frontend">Install Icinga Web
    Interface</a>.</p>

    <p>Install the Icinga classic web config file in the Apache conf.d directory.</p>

    <pre class="screen"> #&gt; make install-webconf</pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Starting with Icinga 1.9 the command 'make install-webconf-auth' additionally installs the file
      <code class="filename">htpasswd.users</code> which contains credentials for the user <span class="emphasis"><em>icingaadmin</em></span> so you can skip the
      following step. The password is <span class="emphasis"><em>icingaadmin</em></span>.</p>
    </td></tr>
</table></div>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Starting with Apache 2.4 (testing versions of Debian / Ubuntu) you have to enable the configuration </p>
<pre class="screen">#&gt; a2enconf icinga</pre>
    </td></tr>
</table></div>

    <p>Create an <span class="emphasis"><em>icingaadmin</em></span> account for logging into the Icinga classic web interface. Remember the password
    you assign to this account - you'll need it later.</p>

    <pre class="screen"> #&gt; htpasswd -c /usr/local/icinga/etc/htpasswd.users icingaadmin</pre>

    <p>To change the password of an existing user or to add a new user, take this command:</p>

    <pre class="screen"> #&gt; htpasswd /usr/local/icinga/etc/htpasswd.users &lt;USERNAME&gt;</pre>

    <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
      <p>Depending on your distribution/Apache-version you may have to use <span class="emphasis"><em>htpasswd2</em></span> instead.</p>
    </td></tr>
</table></div>

    <p>Reload/Restart Apache to make the new settings take effect.</p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>Fedora/RHEL/CentOS:</strong></span></p>

        <pre class="screen"> #&gt; service httpd restart</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Ubuntu/openSuSE:</strong></span></p>

        <pre class="screen"> #&gt; service apache2 restart</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian:</strong></span></p>

        <pre class="screen"> #&gt; /etc/init.d/apache2 reload</pre>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.13. Compile and Install the Monitoring Plugins">
<div class="titlepage"><div><div><h3 class="title">
<a name="compileinstallplugins_idoutils"></a>2.6.13. Compile and Install the Monitoring Plugins</h3></div></div></div>
    

    <p>Extract the plugins source code tarball.</p>

    <pre class="screen"> #&gt; cd /usr/src 
 #&gt; tar xvzf nagios-plugins-2.1.tar.gz 
 #&gt; cd nagios-plugins-2.1  </pre>

    <p>Compile and install the plugins by changing install directory to <code class="filename">/usr/local/icinga</code></p>

    <pre class="screen"> #&gt; ./configure --prefix=/usr/local/icinga \
    --with-cgiurl=/icinga/cgi-bin \
    --with-nagios-user=icinga --with-nagios-group=icinga
 #&gt; make 
 #&gt; make install </pre>
  </div>

  <div class="section" title="2.6.14. Adjusting the SELinux settings">
<div class="titlepage"><div><div><h3 class="title">
<a name="selinuxsettings_idoutils"></a>2.6.14. Adjusting the SELinux settings</h3></div></div></div>
    

    <p>RHEL and derived distributions like Fedora and CentOS are shipped with activated SELinux (Security
    Enhanced Linux) running in "enforcing" mode. This may lead to "Internal Server Error" messages when you try to invoke the
    Icinga-CGIs.</p>

    <p>Check if SELinux runs in enforcing mode</p>

    <pre class="screen"> #&gt; getenforce</pre>

    <p>Set SELinux in "permissive" mode</p>

    <pre class="screen"> #&gt; setenforce 0</pre>

    <p>To make this change permanent you have to adjust this setting in <span class="emphasis"><em>/etc/selinux/config</em></span> and restart the
    system.</p>

    <p>Instead of deactivating SELinux or setting it into permissive mode you can use the following commands to run the CGIs in
    enforcing/targeted mode. The <span class="emphasis"><em>semanage</em></span> command will automatically add entries to
    <code class="filename">/etc/selinux/targeted/contexts/files/file_contexts.local</code>.</p>
<pre class="programlisting"> #&gt; semanage fcontext -a -t httpd_sys_script_exec_t '/usr/local/icinga/sbin(/.*)?'
 #&gt; semanage fcontext -a -t httpd_sys_content_t '/usr/local/icinga/share(/.*)?'
 #&gt; semanage fcontext -a -t httpd_sys_rw_content_t '/usr/local/icinga/var(/.*)?'</pre>

    <p>Once you have defined the necessary contexts you have to apply the settings:</p>

    <pre class="programlisting"> #&gt; chcon -R /usr/local/icinga/sbin
 #&gt; chcon -R /usr/local/icinga/share
 #&gt; chcon -R /usr/local/icinga/var/rw</pre>

    <p>For details please take a look at <a class="link" href="http://www.linuxquestions.org/questions/blog/sag47-492023/selinux-and-icinga-34926/" target="_top">http://www.linuxquestions.org/questions/blog/sag47-492023/selinux-and-icinga-34926/</a>.</p>
  </div>

  <div class="section" title="2.6.15. Start IDOUtils and Icinga">
<div class="titlepage"><div><div><h3 class="title">
<a name="startiido2dbandicinga"></a>2.6.15. Start IDOUtils and Icinga</h3></div></div></div>
    

    <p>IDOUtils must be started and running <span class="emphasis"><em>before</em></span> Icinga is started.</p>

    <p><span class="emphasis"><em>Start IDOUtils:</em></span></p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong> Fedora/RHEL/CentOS/Ubuntu/openSuSE:</strong></span></p>

        <pre class="screen"> #&gt; service ido2db start</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian:</strong></span></p>

        <pre class="screen"> #&gt; /etc/init.d/ido2db start</pre>
      </li>
</ul></div>

    <p><span class="emphasis"><em>Stop IDOUtils:</em></span></p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong> Fedora/RHEL/CentOS/Ubuntu/openSuSE:</strong></span></p>

        <pre class="screen"> #&gt; service ido2db stop</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian:</strong></span></p>

        <pre class="screen"> #&gt; /etc/init.d/ido2db stop</pre>
      </li>
</ul></div>

    <p>Verify the sample Icinga configuration files.</p>

    <pre class="screen"> #&gt; /usr/local/icinga/bin/icinga -v /usr/local/icinga/etc/icinga.cfg </pre>

    <p>If there are no errors, start Icinga.</p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong> Fedora/RHEL/CentOS/Ubuntu/openSuSE:</strong></span></p>

        <pre class="screen"> #&gt; service icinga start</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian:</strong></span></p>

        <pre class="screen"> #&gt; /etc/init.d/icinga start</pre>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.16. Configure Icinga Startup">
<div class="titlepage"><div><div><h3 class="title">
<a name="configstartup_idoutils"></a>2.6.16. Configure Icinga Startup</h3></div></div></div>
    

    <p>Add Icinga to the list of system services and have it automatically start when the system boots (make sure you have
    installed the init script before).</p>

    <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
        <p><span class="bold"><strong>Fedora/RHEL/CentOS/openSuSE:</strong></span></p>

        <pre class="screen"> #&gt; chkconfig --add icinga chkconfig icinga on</pre>
      </li>
<li class="listitem">
        <p><span class="bold"><strong>Debian/Ubuntu:</strong></span></p>

        <pre class="screen"> #&gt; update-rc.d icinga defaults</pre>
      </li>
</ul></div>
  </div>

  <div class="section" title="2.6.17. Login to the Classic Web Interface">
<div class="titlepage"><div><div><h3 class="title">
<a name="loginclassicui_idoutils"></a>2.6.17. Login to the Classic Web Interface</h3></div></div></div>
    

    <p>You should now be able to access the Icinga classic web interface at the URL below. You'll be prompted for the username (
    <span class="emphasis"><em>icingaadmin</em></span> ) and password you specified earlier. </p>
<pre class="screen"> http://localhost/icinga/</pre>
<p> or </p>
<pre class="screen"> http://yourdomain.com/icinga/ </pre>

    <p>Click on the "Service Detail" navbar link to see details of what's being monitored on your local machine. It will take a few
    minutes for Icinga to check all the services associated with your machine.</p>
  </div>

  <div class="section" title="2.6.18. Other Modifications">
<div class="titlepage"><div><div><h3 class="title">
<a name="othermods_idoutils"></a>2.6.18. Other Modifications</h3></div></div></div>
    

    <p>Make sure your system's firewall rules are configured to allow access to the web server if you want to access the Icinga
    classic interface remotely.</p>

    <pre class="screen"> #&gt; iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT</pre>

    <p>Setting up your mail transfer agent (MTA) like exim, sendmail or postfix to allow Icinga sending notification emails won't
    be explained here.</p>

    <p>There are several tweaks for the IDOUtils (former NDOUtils of Nagios) available.</p>
  </div>

  <div class="section" title="2.6.19. You're Done">
<div class="titlepage"><div><div><h3 class="title">
<a name="done_idoutils"></a>2.6.19. You're Done</h3></div></div></div>
    

    <p>Congratulations! You successfully installed Icinga with IDOUtils. Your journey into monitoring has just begun.
    You'll no doubt want to monitor more than just your local machine, so check out the chapter on <a class="link" href="ch02.html" title="Chapter 2. Getting Started">"Getting
    Started"</a> about "Monitoring ..."</p>

    <a class="indexterm" name="idm140381637949632"></a>

    <a class="indexterm" name="idm140381637947936"></a>
  </div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="quickstart-icinga-freebsd.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="quickstart-idoutils-freebsd.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">2.5. Icinga Quickstart FreeBSD </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 2.7. Icinga and IDOUtils Quickstart on FreeBSD</td>
</tr>
</table>
</div>
<P class="copyright">© 1999-2009 Ethan Galstad, 2009-2017 Icinga Development Team, https://www.icinga.com</P>
</body>
</html>
